(()=>{var n={firstTransition:200,topHighOffset:50,bottomHighOffset:100,minTopBottomSpace:100,shortScreenAddition:300,largeScreenAddition:50,panelPrefix:".panel",colors:{blue:"#0e2c57",white:"#ededed",black:"#14171c"}};var c={panels:document.querySelectorAll(".panel"),numPanels:document.querySelectorAll(".panel").length};var l=class{static getElementY(e){return e.getBoundingClientRect().y+window.scrollY}static setElementStyle(e,t){e&&Object.entries(t).forEach(([o,i])=>{e.style[o]=i})}static calculateAddition(e,t){return e<t+n.minTopBottomSpace*2?n.shortScreenAddition:n.largeScreenAddition}};var a=class{constructor(e,t){this.element=e,this.index=t}getHeight(){return this.element.offsetHeight}getYPosition(){return l.getElementY(this.element)}setMarginTop(e){this.element.style.marginTop=`${e}px`}setBackgroundColor(e){this.element.style.backgroundColor=e}setOpacity(e){this.element.style.opacity=e}};var h=class{constructor(){this.transitionY=[],this.headerHeight=document.querySelector("nav").clientHeight,this.navbar=document.querySelector(".navbar-nav"),this.panels=this.getPanels(),this.largestPanelHeight=Math.max(...this.panels.map(e=>e.getHeight())),this.useableArea=window.innerHeight-this.headerHeight}getPanel(e){let t=document.querySelector(`${n.panelPrefix}${e}`);return t?new a(t,e):(console.error(`Panel ${e} not found.`),null)}getPanels(){let e=[];for(let t=2;t<=c.numPanels;t++){let o=document.querySelector(`${n.panelPrefix}${t} > div`);o!==null&&e.push(new a(o,t+2))}return e}setPanelMargins(){for(let e=2;e<=c.numPanels;e++){let t=this.getPanel(e);if(!t)continue;let o=t.getHeight(),i=this.calculateMarginTop(o,e,t.getYPosition());t.setMarginTop(i),this.useableArea>this.largestPanelHeight&&this.transitionY.push(t.element.getBoundingClientRect().y-this.headerHeight+window.scrollY+n.topHighOffset)}}calculateMarginTop(e,t,o){return this.useableArea>e?t===2?-(this.useableArea+e)/2+n.firstTransition+l.calculateAddition(this.useableArea,e):this.transitionY[t-3]-o+(window.innerHeight-e)/2+l.calculateAddition(this.useableArea,e):-this.useableArea/2}positionScrollPoints(){for(let e=2;e<=c.numPanels;e++){let t=this.getPanel(e);if(!t)continue;let o=t.element.querySelector(".scroll-point"),i=(window.innerHeight-t.getHeight()+this.headerHeight)/2-n.topHighOffset;o.style.height=`${i}px`,o.style.marginTop=`-${i}px`}}setNavbarVisibility(){this.navbar.style.display=this.useableArea<this.largestPanelHeight+50?"none":"flex"}setPositions(){this.setPanelMargins(),this.setNavbarVisibility(),this.positionScrollPoints(),document.querySelector(".top-panel").style.paddingTop=`${this.headerHeight}px`}};var s=class r{static toggleTopPanel(e){let t=document.querySelector(".top-panel");l.setElementStyle(t,{opacity:e===1?"1":"0"});let o=new a(document.querySelector(".panel2"),2);l.setElementStyle(o.element,{opacity:"0",pointerEvents:e===1?"none":"auto"})}static textColour(e,t){document.querySelectorAll(`${n.panelPrefix}${t} p:not(#openingpara), ${n.panelPrefix}${t} h1:not(#openingpara)`).forEach(i=>{i.classList.toggle("text-white",e==="white")})}static showText(e){let t=document.querySelectorAll(`${n.panelPrefix}2, ${n.panelPrefix}3, ${n.panelPrefix}4, ${n.panelPrefix}5`);r.textColour(e%2?"white":"black",e+1),t.forEach((o,i)=>o.style.opacity=i===e-1?"1":"0")}static setPanelBackgroundColour(e){let t=document.querySelectorAll(`body, ${n.panelPrefix}2, ${n.panelPrefix}3, ${n.panelPrefix}4, ${n.panelPrefix}5`);r.toggleTopPanel(0),t.forEach(o=>o.style.backgroundColor=e)}static headerLinks(e){[...document.querySelector(".navbar-nav").children].forEach((o,i)=>{o.classList.toggle("text-danger",i===e),o.classList.toggle("text-dark",i!==e)})}};var p=new h;window.addEventListener("load",()=>{p.setPositions()});window.addEventListener("resize",()=>{p.setPositions()});window.addEventListener("scroll",()=>{let r=[],e=[];for(let o=2;o<=c.numPanels-1;o++){let i=p.getPanel(o);i&&(r.push(i.element.getBoundingClientRect().y<document.querySelector("nav").clientHeight-n.topHighOffset),e.push(i.element.getBoundingClientRect().bottom<window.innerHeight-n.bottomHighOffset))}let t=window.scrollY;t<n.firstTransition?(s.toggleTopPanel(1),s.headerLinks(-1)):t>=n.firstTransition&&!r[0]?(s.setPanelBackgroundColour(n.colors.blue),s.showText(1),s.headerLinks(0)):r[0]&&!r[1]&&!r[2]&&e[0]?(s.setPanelBackgroundColour(n.colors.white),s.showText(2),s.headerLinks(1)):r[1]&&!r[2]&&e[1]?(s.setPanelBackgroundColour(n.colors.black),s.showText(3),s.headerLinks(2)):r[2]&&e[2]&&(s.setPanelBackgroundColour(n.colors.white),s.showText(4),s.headerLinks(3))});})();
